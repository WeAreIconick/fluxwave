/**
 * Frontend & Editor styles for Fluxwave block
 */

@use "tailwindcss";

/* Main block styles */
.wp-block-fluxwave-fluxwave {
	margin-left: auto;
	margin-right: auto;
	max-width: 56rem;
}

/* Screen reader only */
.sr-only {
	position: absolute;
	width: 1px;
	height: 1px;
	padding: 0;
	margin: -1px;
	overflow: hidden;
	clip: rect(0, 0, 0, 0);
	white-space: nowrap;
	border-width: 0;
}

/* Player responsive styles */
.fluxwave-audio-player {
	position: relative;
	opacity: 1;
	transition: opacity 0.2s ease-in-out;
	border-radius: 1rem;
	background: white;
	overflow: hidden;
	padding: 1.5rem; /* Add more padding all around */
	
	/* Theme support - now handled by Tailwind dark: classes */
}

/* Remove dotted border from abbr elements */
.fluxwave-audio-player abbr {
	text-decoration: none;
	border-bottom: none;
}

/* Prevent flash of unstyled content */
.fluxwave-player-block {
	opacity: 1;
	transition: opacity 0.2s ease-in-out;
}

.fluxwave-player-block.loading {
	opacity: 0.8;
}

.fluxwave-player-block.loaded {
	opacity: 1;
}

/* Skeleton loading animations */
@keyframes pulse {
	0%, 100% {
		opacity: 1;
	}
	50% {
		opacity: 0.5;
	}
}

.animate-pulse {
	animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

/* Transport controls responsive */
.fluxwave-transport-controls {
	display: flex;
	align-items: center;
	justify-content: space-between;
	gap: 1rem;
}

@media (max-width: 640px) {
	.fluxwave-transport-controls {
		flex-direction: column;
		gap: 0.75rem;
	}

	.fluxwave-audio-player {
		font-size: 0.875rem;
	}

	.fluxwave-track-info h3 {
		font-size: 1rem;
	}

	.fluxwave-visualizer-canvas {
		height: 200px !important;
	}
}

/* Track list responsive */
.fluxwave-track-item {
	touch-action: none; /* For better drag performance on mobile */
}

@media (max-width: 640px) {
	.fluxwave-track-item {
		padding: 0.5rem;
		font-size: 0.875rem;
	}

	.fluxwave-track-item img {
		width: 2.5rem;
		height: 2.5rem;
	}
}

/* Progress bar touch targets */
.fluxwave-progress-bar [role="slider"] {
	min-height: 44px; /* WCAG touch target size */
	display: flex;
	align-items: center;
}

/* Focus styles for accessibility - uses accent color */
.fluxwave-audio-player button:focus-visible {
	outline: 3px solid var(--accent-color, #06b6d4);
	outline-offset: 2px;
	border-radius: 0.25rem;
}

.fluxwave-audio-player [role="slider"]:focus-visible {
	outline: 3px solid var(--accent-color, #06b6d4);
	outline-offset: 2px;
	box-shadow: 0 0 0 4px rgba(6, 182, 212, 0.1);
}

/* High contrast mode support for accessibility */
@media (prefers-contrast: high) {
	.fluxwave-audio-player {
		border: 2px solid currentColor;
	}
	
	.fluxwave-audio-player button {
		border: 2px solid currentColor;
	}
	
	.fluxwave-audio-player [role="slider"] {
		border: 2px solid currentColor;
	}
}

/* Improved color contrast for better accessibility */
.fluxwave-audio-player {
	.text-gray-500 {
		color: #374151; /* Improved contrast: 7.1:1 */
	}
	
	.text-gray-600 {
		color: #1f2937; /* Improved contrast: 12.6:1 */
	}
	
	.text-slate-500 {
		color: #374151; /* Improved contrast: 7.1:1 */
	}
	
	.text-slate-600 {
		color: #1f2937; /* Improved contrast: 12.6:1 */
	}
}

/* Skip link styles */
.skip-link {
	position: absolute;
	top: -40px;
	left: 6px;
	background: #000;
	color: #fff;
	padding: 8px;
	text-decoration: none;
	z-index: 1000;
	border-radius: 4px;
}

.skip-link:focus {
	top: 6px;
}

/* High contrast mode button styles */
@media (prefers-contrast: high) {
	.fluxwave-audio-player button:hover,
	.fluxwave-audio-player button:focus {
		background-color: Highlight;
		color: HighlightText;
	}
}

/* Reduced motion support for accessibility */
@media (prefers-reduced-motion: reduce) {
	.fluxwave-audio-player * {
		animation-duration: 0.01ms !important;
		animation-iteration-count: 1 !important;
		transition-duration: 0.01ms !important;
	}
}

/* Ensure sufficient color contrast */
.fluxwave-audio-player {
	/* WCAG AA minimum contrast ratios */
	--text-primary: #0f172a; /* slate-900 */
	--text-secondary: #64748b; /* slate-500 */
	--bg-primary: #ffffff;
	--bg-secondary: #f8fafc; /* slate-50 */
}
